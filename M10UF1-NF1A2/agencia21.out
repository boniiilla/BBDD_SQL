+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 17:14:05 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:05.911 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:06.923 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:06.930 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:07.946 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:08.963 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:10.998 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:14:13.022 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                                                                  |
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 17:14:05.903536 | SELECT current_timestamp()                                                                                                                                           |
| 2024-10-09 17:14:05.909830 | DELETE FROM Viatges where Codi = 31                                                                                                                                  |
| 2024-10-09 17:14:05.910224 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                                                                         |
| 2024-10-09 17:14:05.911275 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:05.914305 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                                                               |
| 2024-10-09 17:14:05.914847 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:14:05.919447 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:06.923430 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:06.926818 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                                                              |
| 2024-10-09 17:14:06.926989 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:14:06.927130 | UPDATE Viatges 
    SET N_Places = N_Places - NEW.N_Places 
    WHERE Codi = NEW.Codi_Viatge                                                                         |
| 2024-10-09 17:14:06.927604 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                                                                        |
| 2024-10-09 17:14:06.930863 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:06.934686 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                                                              |
| 2024-10-09 17:14:06.934809 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:14:06.934945 | UPDATE Viatges 
    SET N_Places = N_Places - NEW.N_Places 
    WHERE Codi = NEW.Codi_Viatge                                                                         |
| 2024-10-09 17:14:06.935411 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:07.943016 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                                                              |
| 2024-10-09 17:14:07.946163 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:07.949978 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                                                              |
| 2024-10-09 17:14:07.950075 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:14:07.950140 | SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                                        |
| 2024-10-09 17:14:07.952586 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:08.959697 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                                                               |
| 2024-10-09 17:14:08.963890 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:08.967989 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                                                                           |
| 2024-10-09 17:14:08.968146 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:14:08.968192 | SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                               |
| 2024-10-09 17:14:08.968582 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:14:08.971881 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:09.983369 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:14:09.986392 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:10.995359 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                                                                  |
| 2024-10-09 17:14:10.998454 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:11.002310 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                                                                          |
| 2024-10-09 17:14:11.002447 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:14:11.002497 | SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                               |
| 2024-10-09 17:14:11.002570 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:14:11.006588 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:12.011648 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:14:12.015394 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:13.019657 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                                                                     |
| 2024-10-09 17:14:13.022674 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:14:13.025634 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                                                                     |
| 2024-10-09 17:14:13.025770 | SELECT  NAME_CONST('Data_Sortida',NULL) INTO data_sortida 
        FROM Viatges 
        WHERE Codi = OLD.Codi_Viatge 
        LIMIT 1                               |
| 2024-10-09 17:14:13.025974 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:14:14.033031 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:14:14.036162 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:14:14.043402 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                                                                         |
| 2024-10-09 17:14:14.047997 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time                                              |
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 17:23:51 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:51.914 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:52.928 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:52.936 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:53.952 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:54.967 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:57.007 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 17:23:59.031 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       26 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 39101006V  |        2 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                                                                  |
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 17:23:51.907477 | SELECT current_timestamp()                                                                                                                                           |
| 2024-10-09 17:23:51.912746 | DELETE FROM Viatges where Codi = 31                                                                                                                                  |
| 2024-10-09 17:23:51.913801 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                                                                         |
| 2024-10-09 17:23:51.914575 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:51.918013 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                                                               |
| 2024-10-09 17:23:51.918371 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:23:51.922074 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:52.928164 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:52.931539 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                                                              |
| 2024-10-09 17:23:52.931867 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:23:52.932018 | UPDATE Viatges 
    SET N_Places = N_Places - NEW.N_Places 
    WHERE Codi = NEW.Codi_Viatge                                                                         |
| 2024-10-09 17:23:52.932532 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                                                                        |
| 2024-10-09 17:23:52.937043 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:52.940906 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                                                              |
| 2024-10-09 17:23:52.941102 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:23:52.941308 | UPDATE Viatges 
    SET N_Places = N_Places - NEW.N_Places 
    WHERE Codi = NEW.Codi_Viatge                                                                         |
| 2024-10-09 17:23:52.941819 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:53.948129 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                                                              |
| 2024-10-09 17:23:53.952308 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:53.956351 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                                                              |
| 2024-10-09 17:23:53.956532 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:23:53.956618 | SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                                        |
| 2024-10-09 17:23:53.957030 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:54.964319 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                                                               |
| 2024-10-09 17:23:54.967572 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:54.971772 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                                                                           |
| 2024-10-09 17:23:54.971979 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:23:54.972039 | SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                               |
| 2024-10-09 17:23:54.972363 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:23:54.977732 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:55.987532 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:23:55.991072 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:57.003959 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                                                                  |
| 2024-10-09 17:23:57.007077 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:57.009999 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                                                                          |
| 2024-10-09 17:23:57.010257 | SELECT N_Places,  NAME_CONST('Data_Sortida',NULL) INTO places_disponibles, data_sortida 
        FROM Viatges 
        WHERE Codi = NEW.Codi_Viatge 
        LIMIT 1 |
| 2024-10-09 17:23:57.010314 | SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = "Error: Supera el límit de places"                                                                               |
| 2024-10-09 17:23:57.010787 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:23:57.014840 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:58.019850 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:23:58.023414 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:23:59.028105 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                                                                     |
| 2024-10-09 17:23:59.031574 | SELECT current_timestamp(3)                                                                                                                                          |
| 2024-10-09 17:23:59.035446 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                                                                     |
| 2024-10-09 17:23:59.035602 | SELECT  NAME_CONST('Data_Sortida',NULL) INTO data_sortida 
        FROM Viatges 
        WHERE Codi = OLD.Codi_Viatge 
        LIMIT 1                               |
| 2024-10-09 17:23:59.035774 | SELECT SLEEP(1)                                                                                                                                                      |
| 2024-10-09 17:24:00.042313 | Select * From Viatges                                                                                                                                                |
| 2024-10-09 17:24:00.046051 | Select * From Reserves_Viatges                                                                                                                                       |
| 2024-10-09 17:24:00.050315 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                                                                         |
| 2024-10-09 17:24:00.054191 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time                                              |
+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
